<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.0.0">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="alias_method">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="alias_method">
  <title>alias_method main</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          alias_method
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="alias_method/toplevel" data-name="top level namespace">
      <a href="toplevel.html">Top Level Namespace</a>
      
    </li>
  
  <li class="parent " data-id="alias_method/AliasMethod" data-name="aliasmethod">
      <a href="AliasMethod.html">AliasMethod</a>
      
        <ul>
  
  <li class=" " data-id="alias_method/AliasMethod/Alias" data-name="aliasmethod::alias">
      <a href="AliasMethod/Alias.html">Alias</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="alias_method/NoMethodError" data-name="nomethoderror">
      <a href="NoMethodError.html">NoMethodError</a>
      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<p><img src="https://img.shields.io/github/workflow/status/wyhaines/alias_method.cr/Alias_Method.cr%20CI?style=for-the-badge&logo=GitHub" alt="Alias_Method.cr CI"/>
<a href="https://github.com/wyhaines/alias_method.cr/releases"><img src="https://img.shields.io/github/release/wyhaines/alias_method.cr.svg?style=for-the-badge" alt="GitHub release"/></a>
<img src="https://img.shields.io/github/commits-since/wyhaines/alias_method.cr/latest?style=for-the-badge" alt="GitHub commits since latest release (by SemVer)"/></p>

<h1><a id="alias-method.crhttpswyhaines.github.ioalias-method.cr" class="anchor" href="#alias-method.crhttpswyhaines.github.ioalias-method.cr">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><a href="https://wyhaines.github.io/alias_method.cr/">Alias_Method.cr</a></h1>

<p>Crystal does not natively support the creation of method aliases. This is by design, and the general philosophy of the language is that any given method should only be called by a single name.</p>

<p>However, there are times when one might want to create method aliases. It is certainly possible to hand-write code to do this, but this shard provides a single-line way of aliasing a method. It works for both instance methods and for class methods.</p>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<ol><li>Add the dependency to your <code>shard.yml</code>:</li></ol>

<p><code></code>`yaml
   dependencies:</p>

<pre><code class="language-crystal"> alias_method:
   github: wyhaines/alias_method.cr</code></pre>

<p><code></code>`</p>

<ol><li>Run <code>shards install</code></li></ol>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<p>See the <a href="https://wyhaines.github.io/alias_method.cr/toplevel.html">complete documentation</a> for full information on this shard and how to use it.</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;alias_method&quot;</span>

<span class="k">class</span> <span class="t">MyClass</span>
  <span class="k">def</span> <span class="m">self</span>.add(x, y)
    x <span class="o">+</span> y
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">with</span>(arg)
    <span class="k">yield</span> arg
  <span class="k">end</span>

  <span class="k">def</span> <span class="o">[]</span>(val)
    val <span class="o">**</span> <span class="n">3</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">chain</span>(ary)
    ary <span class="o">&lt;&lt;</span> <span class="s">&quot;a&quot;</span>
  <span class="k">end</span>

  alias_method <span class="s">&quot;self.suma&quot;</span>, <span class="s">&quot;self.add&quot;</span> <span class="c"># Class method alias</span>
  alias_method suma, <span class="t">MyClass</span>.add       <span class="c"># Instance method alias to a class method</span>
  alias_method con, <span class="n">:with</span>, <span class="n">1</span>           <span class="c"># Alias to a method that yields</span>
  alias_method cube, <span class="n">:[]</span>               <span class="c"># Alias to a method name that has punctuation</span>
  alias_method nada, nothing           <span class="c"># Alias to a method that doesn&#39;t exist (no error)</span>

  alias_method chain_a, chain          <span class="c"># Create a chain of aliases</span>
  <span class="k">def</span> <span class="m">chain</span>(ary)
    chain_a(ary) <span class="o">&lt;&lt;</span> <span class="s">&quot;b&quot;</span>
  <span class="k">end</span>
  alias_method chain_b, chain
  <span class="k">def</span> <span class="m">chain</span>(ary)
     chain_b(ary) <span class="o">&lt;&lt;</span> <span class="s">&quot;c&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

foo <span class="o">=</span> <span class="t">MyClass</span>.<span class="k">new</span>

puts <span class="s">&quot;Call the MyClass.add class method via the class method alias, MyClass.suma: </span><span class="i">#{</span><span class="t">MyClass</span>.suma(<span class="n">123</span>, <span class="n">456</span>)<span class="i">}</span><span class="s">&quot;</span>
puts <span class="s">&quot;Call the MyClass.add class method via the instance method alias, MyClass#suma: </span><span class="i">#{</span>foo.suma(<span class="n">456</span>, <span class="n">789</span>)<span class="i">}</span><span class="s">&quot;</span>
puts <span class="s">&quot;Call an alias to a method that takes a block: </span><span class="i">#{</span>foo.con(<span class="n">7</span>) {<span class="o">|</span>x<span class="o">|</span> x <span class="o">**</span> x<span class="i">}</span><span class="s">}&quot;</span>
puts <span class="s">&quot;Call a method that forms a chain of aliased methods: </span><span class="i">#{</span>foo.chain(<span class="o">[]</span> <span class="k">of</span> <span class="t">String</span>).inspect<span class="i">}</span><span class="s">&quot;</span></code></pre>

<p>The shard also implements a <code><a href="toplevel.html#remove_method(old)-macro">remove_method</a></code> macro that can be used to (sort of) remove methods. Crystal does not actually provide any ability to truly undefine a method, so this macro redefines the removed method to throw a <code><a href="NoMethodError.html">NoMethodError</a></code> exception.</p>

<pre><code class="language-crystal"><span class="k">class</span> <span class="t">MyClass</span>
  <span class="k">def</span> <span class="m">self</span>.add(x, y)
    x <span class="o">+</span> y
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">with</span>(arg)
    <span class="k">yield</span> arg
  <span class="k">end</span>

  <span class="c"># Spanish translations of the method names:</span>
  alias_method <span class="s">&quot;suma&quot;</span>, <span class="s">&quot;self.add&quot;</span>
  alias_method <span class="s">&quot;con&quot;</span>, <span class="s">&quot;with&quot;</span>

  <span class="c"># Remove the English versions.</span>
  remove_method <span class="s">&quot;with&quot;</span>
  remove_method <span class="s">&quot;self.add&quot;</span>
<span class="k">end</span></code></pre>

<h2><a id="benchmarks" class="anchor" href="#benchmarks">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Benchmarks</h2>

<p>Aliasing methods has no impact on performance, when compiling in release mode (in development mode, they are approximately 1/2 as fast as unaliased methods).</p>

<pre><code class="language-crystal">--------------------------------          
   bare, aliased, alias 968.52M (  1.03ns) (± 2.71%)  0.0B/op        fastest
bare, aliased, original 965.20M (  1.04ns) (± 2.67%)  0.0B/op   1.00× slower
        bare, unaliased 965.87M (  1.04ns) (± 2.65%)  0.0B/op   1.00× slower
--------------------------------
   with arguments, aliased, alias 970.17M (  1.03ns) (± 2.43%)  0.0B/op        fastest
with arguments, aliased, original 962.70M (  1.04ns) (± 2.55%)  0.0B/op   1.01× slower
        with arguments, unaliased 964.02M (  1.04ns) (± 2.44%)  0.0B/op   1.01× slower
--------------------------------
   with block, aliased, alias 966.57M (  1.03ns) (± 2.33%)  0.0B/op        fastest
with block, aliased, original 961.09M (  1.04ns) (± 4.18%)  0.0B/op   1.01× slower
        with block, unaliased 966.30M (  1.03ns) (± 2.40%)  0.0B/op   1.00× slower
--------------------------------
   with yield, aliased, alias 968.25M (  1.03ns) (± 2.17%)  0.0B/op        fastest
with yield, aliased, original 966.45M (  1.03ns) (± 2.49%)  0.0B/op   1.00× slower
        with yield, unaliased 966.61M (  1.03ns) (± 2.49%)  0.0B/op   1.00× slower
--------------------------------
   class method, aliased, alias 968.68M (  1.03ns) (± 2.83%)  0.0B/op        fastest
class method, aliased, original 966.72M (  1.03ns) (± 2.63%)  0.0B/op   1.00× slower
        class method, unaliased 967.43M (  1.03ns) (± 2.27%)  0.0B/op   1.00× slower
--------------------------------</code></pre>

<p>One interesting thing to note is that there seems to be a very slight bias in benchmark outcomes, based on the order of the code being benchmarked. In general, the first block tends to benchmark very slightly faster than the last, which means that if the order of each of the items in the benchmark is reversed, so that unaliased is first, and the aliased method is last, the above results would likely lean towards unaliased first. However, the effect is very slight. There is no appreciable difference in performance, in release mode code, between an aliased method and an unaliased method.</p>

<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Development</h2>

<p>If you wish to contribute to this shard, please fork the repository, and work from a branch within your own fork. When your work is complete (and has appropriate specs), submit a PR. Thank you!</p>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li>Fork it (&lt;https://github.com/wyhaines/alias_method/fork>)</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/wyhaines">Kirk Haines</a> - creator and maintainer</li></ul>

<p><img src="https://img.shields.io/github/languages/code-size/wyhaines/alias_method.cr?style=for-the-badge" alt="GitHub code size in bytes"/>
<img src="https://img.shields.io/github/issues/wyhaines/alias_method.cr?style=for-the-badge" alt="GitHub issues"/></p>
</div>
</body>
</html>
